# 比较Firefox和Chrome的记住密码插件的实现区别
现在记住密码是浏览器的常用功能，本项目通过对比Firefox和谷歌的记住密码插件的实现区别，并对其进行分析
## 1 实验环境
处理器相关信息
![](https://img1.imgtp.com/2023/08/04/R8JHtkpM.png)
浏览器相关信息：
|浏览器|版本|
|:---|:---|
|Chrome|115.0.5790.111|
|Firefox|109.0.1|

## 2 分析过程
### 2.1 记住密码的原理
记住密码的基本原理是应用Cookie。当登录一个网站时，网站往往会请求用户输入用户名和密码，并且用户可以勾选“下次自动登录”。如果勾选了，那么下次访问同一网站时，用户会发现没输入用户名和密码就已经登录了。这正是因为前一次登录时，服务器发送了包含登录凭据（用户名加密码的某种加密形式）的Cookie到用户的硬盘上。第二次登录时，（如果该Cookie尚未到期）浏览器会发送该Cookie，服务器验证凭据，于是不必输入用户名和密码就让用户登录了。
### 2.2 Chrome浏览器
首先找到管理密码的入口：
![](https://img1.imgtp.com/2023/08/04/eNa5ubBO.png)
尝试添加一个密码：
![](https://img1.imgtp.com/2023/08/04/DJjeb7pB.png)
通过查阅相关文档，对于保存密码插件有这样的描述
* 密码保护功能的运作方式
如果您用来登录某个网站的用户名和密码遭遇了数据泄露，Chrome 可向您发出警告。此设置默认处于开启状态。
您还能使用 Chrome 同时检查您已保存的所有凭据。Chrome 会检查您已保存的密码，并让您知道其中任何密码是否遭遇了数据泄露。
为了检查您的凭据，Chrome 会先加密您的用户名和密码。然后，它会将已加密的凭据发送给 Google，以供与一系列已加密的已知已泄露数据进行比较。如果 Chrome 检测到已加密的数据集之间存在匹配项，便会显示一条警告，提示您更改密码。在此过程中，Google 绝不会得知您的用户名或密码。

* 如何保护您的数据
当您从 Chrome 中登录网站时，Chrome 会使用只有您的设备知道的密钥来加密您的用户名和密码。然后，Chrome 会将您数据的经过模糊处理的副本发送给 Google。由于加密发生在 Google 服务器收到相应信息之前，因此任何人（包括 Google）都不会得知您的用户名或密码。

设备端加密功能使用入门
设备端加密功能如何帮助保护您的数据
Google 数据加密功能的原理就像是将贵重物品锁到保险箱中。您锁好贵重物品，然后将钥匙交给银行保管。

通过分析可知Chrome就是用户系统密码将用户保存在浏览器的密码加密保存在一个SQLite数据库里，保存在电脑里的Login Data 文件中，导出工具就是对这个文件执行一下win32crypt.CryptUnprotectData函数，调用系统解密就可以直接解密出里面保存的密码。

其中保存密码在本地的原理是依赖设备端的加密。当需要使用密码或通行密钥时，Google 密码管理工具会在确定您的身份后为您解锁密码或通行密钥。采用这种加密方式即意味着，我们相信 Google 会妥善保管密钥并保障数据安全。

### 2.3 Firefox浏览器
同样找到密码管理的入口：
![](https://img1.imgtp.com/2023/08/04/drNPBP4C.png)
类似于Chrome，Firefox同样将密码保存在本地，在在以下文件夹中:

C:\Documents and Settings\{your username}
\Application Data\Mozilla\Firefox\Profiles\{random mix char}.default

cookie信息存储在文件“ cookies.sqlite”和“ permissions.sqlite”中。

## 3 对比分析
### 3.1 密码保存和加密机制：

- Firefox： Firefox使用称为“登录信息”的功能来保存密码。这些信息以加密方式存储在浏览器的内部数据库中。用户可以设置主密码，用于加密保存的密码。这意味着即使其他人可以访问您的计算机，也需要知道主密码才能解密和查看保存的密码。
- Chrome： Chrome使用“Google帐号”来保存密码。密码可以与用户的Google帐号关联，这使得当用户切换设备时可以同步密码。保存在Google帐号中的密码也是加密的，使用您的Google帐号密码进行加密。

### 3.2 自动填充表单机制：

* Firefox： Firefox依赖于浏览器自身的密码管理功能来自动填充表单。它会自动检测网站的登录表单，并在用户请求时填充用户名和密码。
* Chrome： Chrome除了自动检测表单外，还提供了“自动填充表单”技术。开发者可以使用autocomplete属性和autofill元标签来指示浏览器填充表单字段，这在一些特殊情况下可能更加精确和灵活。
开发者指导和支持：

### 3.3 功能限制
* Firefox： Firefox为开发者提供有关如何在网站中实现良好的密码保存体验的文档和指导。开发者可以通过确保登录表单中的用户名和密码字段被正确标记为“password”类型，以便浏览器识别它们。Firefox还会在用户登录时询问是否要保存密码。
* Chrome： Chrome为开发者提供了详细的“自动填充表单”文档，这允许开发者更精确地控制自动填充的行为。开发者可以使用autocomplete属性和autofill元标签来指示浏览器如何填充字段，甚至可以指定预填充的内容。
用户控制和隐私：

### 3.4 隐私保护
* Firefox： Firefox在用户隐私方面较为强调，因此用户可以更加精细地控制是否保存密码。此外，用户可以选择是否使用主密码来加密保存的密码。
* Chrome： Chrome将密码保存与Google帐号相关联，这可以实现跨设备同步。然而，由于涉及Google帐号，一些用户可能对隐私保护有所顾虑。

## 参考资料：
[1] https://blog.csdn.net/cyan20115/article/details/106554264